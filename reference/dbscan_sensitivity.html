<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Sensitivity analysis of DBSCAN parameters for flow clustering. The function allows you to test different combinations of epsilon and minPts parameters for clustering flows using DBSCAN. It can be used to determine what parameter values make sense for your data — dbscan_sensitivity • flowcluster</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Sensitivity analysis of DBSCAN parameters for flow clustering. The function allows you to test different combinations of epsilon and minPts parameters for clustering flows using DBSCAN. It can be used to determine what parameter values make sense for your data — dbscan_sensitivity"><meta name="description" content="Sensitivity analysis of DBSCAN parameters for flow clustering. The function allows you to test
different combinations of epsilon and minPts parameters for clustering flows using DBSCAN. It can be used
to determine what parameter values make sense for your data"><meta property="og:description" content="Sensitivity analysis of DBSCAN parameters for flow clustering. The function allows you to test
different combinations of epsilon and minPts parameters for clustering flows using DBSCAN. It can be used
to determine what parameter values make sense for your data"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">flowcluster</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Sensitivity analysis of DBSCAN parameters for flow clustering. The function allows you to test different combinations of epsilon and minPts parameters for clustering flows using DBSCAN. It can be used to determine what parameter values make sense for your data</h1>

      <div class="d-none name"><code>dbscan_sensitivity.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Sensitivity analysis of DBSCAN parameters for flow clustering. The function allows you to test
different combinations of epsilon and minPts parameters for clustering flows using DBSCAN. It can be used
to determine what parameter values make sense for your data</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dbscan_sensitivity</span><span class="op">(</span></span>
<span>  <span class="va">dist_mat</span>,</span>
<span>  <span class="va">flows</span>,</span>
<span>  <span class="va">options_epsilon</span>,</span>
<span>  <span class="va">options_minpts</span>,</span>
<span>  w_vec <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dist-mat">dist_mat<a class="anchor" aria-label="anchor" href="#arg-dist-mat"></a></dt>
<dd><p>a precalculated distance matrix between desire lines (output of distance_matrix())</p></dd>


<dt id="arg-flows">flows<a class="anchor" aria-label="anchor" href="#arg-flows"></a></dt>
<dd><p>the original flows tibble (must contain flow_ID and 'count' column)</p></dd>


<dt id="arg-options-epsilon">options_epsilon<a class="anchor" aria-label="anchor" href="#arg-options-epsilon"></a></dt>
<dd><p>a vector of options for the epsilon parameter</p></dd>


<dt id="arg-options-minpts">options_minpts<a class="anchor" aria-label="anchor" href="#arg-options-minpts"></a></dt>
<dd><p>a vector of options for the minPts parameter</p></dd>


<dt id="arg-w-vec">w_vec<a class="anchor" aria-label="anchor" href="#arg-w-vec"></a></dt>
<dd><p>Optional precomputed weight vector (otherwise computed internally from 'count' column)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a tibble with columns: id (to identify eps and minpts), cluster, size (number of desire lines in cluster), count_sum (total count per cluster)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">flows</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="va">flows_leeds</span>, <span class="fl">3857</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">flows</span>, <span class="fl">1000</span><span class="op">)</span> <span class="co"># for testing</span></span></span>
<span class="r-in"><span><span class="co"># Add flow lengths and coordinates</span></span></span>
<span class="r-in"><span><span class="va">flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_flow_length.html">add_flow_length</a></span><span class="op">(</span><span class="va">flows</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># filter by length</span></span></span>
<span class="r-in"><span><span class="va">flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="filter_by_length.html">filter_by_length</a></span><span class="op">(</span><span class="va">flows</span>, length_min <span class="op">=</span> <span class="fl">5000</span>, length_max <span class="op">=</span> <span class="fl">12000</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Flows remaining after filtering: 96 (9.6%)</span>
<span class="r-in"><span><span class="co"># Add x, y, u, v coordinates to flows</span></span></span>
<span class="r-in"><span><span class="va">flows</span> <span class="op">&lt;-</span> <span class="fu"><a href="add_xyuv.html">add_xyuv</a></span><span class="op">(</span><span class="va">flows</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Extracting start and end coordinates from flow geometries...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding x, y, u, v columns to flow data...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Assigning unique flow IDs...</span>
<span class="r-in"><span><span class="co"># Calculate distance matrix</span></span></span>
<span class="r-in"><span><span class="va">distances</span> <span class="op">&lt;-</span> <span class="fu"><a href="flow_distance.html">flow_distance</a></span><span class="op">(</span><span class="va">flows</span>, alpha <span class="op">=</span> <span class="fl">1.5</span>, beta <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding coordinates data back onto the unique pairs ...</span>
<span class="r-in"><span><span class="va">dmat</span> <span class="op">&lt;-</span> <span class="fu"><a href="distance_matrix.html">distance_matrix</a></span><span class="op">(</span><span class="va">distances</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Generate weight vector</span></span></span>
<span class="r-in"><span><span class="va">w_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="weight_vector.html">weight_vector</a></span><span class="op">(</span><span class="va">dmat</span>, <span class="va">flows</span>, weight_col <span class="op">=</span> <span class="st">"count"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Define the parameters for sensitivity analysis</span></span></span>
<span class="r-in"><span><span class="va">options_epsilon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, by <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">options_minpts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">100</span>, by <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># # Run the sensitivity analysis</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">dbscan_sensitivity</span><span class="op">(</span></span></span>
<span class="r-in"><span>  dist_mat <span class="op">=</span> <span class="va">dmat</span>,</span></span>
<span class="r-in"><span>  flows <span class="op">=</span> <span class="va">flows</span>,</span></span>
<span class="r-in"><span>  options_epsilon <span class="op">=</span> <span class="va">options_epsilon</span>,</span></span>
<span class="r-in"><span>  options_minpts <span class="op">=</span> <span class="va">options_minpts</span>,</span></span>
<span class="r-in"><span>  w_vec <span class="op">=</span> <span class="va">w_vec</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 1 of 50 : eps = 1 | minpts = 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 2 of 50 : eps = 1 | minpts = 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 3 of 50 : eps = 1 | minpts = 30</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 4 of 50 : eps = 1 | minpts = 40</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 5 of 50 : eps = 1 | minpts = 50</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 6 of 50 : eps = 1 | minpts = 60</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 7 of 50 : eps = 1 | minpts = 70</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 8 of 50 : eps = 1 | minpts = 80</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 9 of 50 : eps = 1 | minpts = 90</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 10 of 50 : eps = 1 | minpts = 100</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 11 of 50 : eps = 3 | minpts = 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 12 of 50 : eps = 3 | minpts = 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 13 of 50 : eps = 3 | minpts = 30</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 14 of 50 : eps = 3 | minpts = 40</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 15 of 50 : eps = 3 | minpts = 50</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 16 of 50 : eps = 3 | minpts = 60</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 17 of 50 : eps = 3 | minpts = 70</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 18 of 50 : eps = 3 | minpts = 80</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 19 of 50 : eps = 3 | minpts = 90</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 20 of 50 : eps = 3 | minpts = 100</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 21 of 50 : eps = 5 | minpts = 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 22 of 50 : eps = 5 | minpts = 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 23 of 50 : eps = 5 | minpts = 30</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 24 of 50 : eps = 5 | minpts = 40</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 25 of 50 : eps = 5 | minpts = 50</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 26 of 50 : eps = 5 | minpts = 60</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 27 of 50 : eps = 5 | minpts = 70</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 28 of 50 : eps = 5 | minpts = 80</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 29 of 50 : eps = 5 | minpts = 90</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 30 of 50 : eps = 5 | minpts = 100</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 31 of 50 : eps = 7 | minpts = 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 32 of 50 : eps = 7 | minpts = 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 33 of 50 : eps = 7 | minpts = 30</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 34 of 50 : eps = 7 | minpts = 40</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 35 of 50 : eps = 7 | minpts = 50</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 36 of 50 : eps = 7 | minpts = 60</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 37 of 50 : eps = 7 | minpts = 70</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 38 of 50 : eps = 7 | minpts = 80</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 39 of 50 : eps = 7 | minpts = 90</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 40 of 50 : eps = 7 | minpts = 100</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 41 of 50 : eps = 9 | minpts = 10</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 42 of 50 : eps = 9 | minpts = 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 43 of 50 : eps = 9 | minpts = 30</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 44 of 50 : eps = 9 | minpts = 40</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 45 of 50 : eps = 9 | minpts = 50</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 46 of 50 : eps = 9 | minpts = 60</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 47 of 50 : eps = 9 | minpts = 70</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 48 of 50 : eps = 9 | minpts = 80</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 49 of 50 : eps = 9 | minpts = 90</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> running dbscan for option 50 of 50 : eps = 9 | minpts = 100</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hussein Mahfouz, Robin Lovelace.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

